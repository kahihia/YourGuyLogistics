/*! Vendor-Webaap - v0.0.0 - 2016-01-07 */
!function(){"use strict";var a=function(a,b,c,d){this.userLogin=function(){var e={username:this.username,password:this.password};b.login(e).then(function(b){c.token=b.data.auth_token,d.$refresh().then(function(b){b.$updateuserRole(),a.go("home")})})}};angular.module("login",[]).config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"/static/modules/login/login.html",controllerAs:"login",controller:"LoginCntrl",resolve:{vendorClients:"vendorClients",access:["Access",function(a){return a.isAnonymous()}]}})}]).controller("LoginCntrl",["$state","AuthService","$localStorage","vendorClients",a])}(),function(){"use strice";var a=function(a,b){return{login:function(c){return a.post(b.v1baseUrl+"auth/login/",c)}}};angular.module("login").factory("AuthService",["$http","constants",a])}(),function(){"use strict";var a=function(a,b,c){console.log(c.$hasRole(b.userRole.VENDOR))};angular.module("home",[]).config(["$stateProvider",function(a){a.state("home",{url:"/home",
// abstract: true,
templateUrl:"/static/modules/home/home.html",controllerAs:"home",controller:"homeCntrl",resolve:{vendorClients:"vendorClients",access:["Access",function(a){return a.isAuthenticated()}]}})}]).controller("homeCntrl",["$state","constants","vendorClients",a])}(),function(){"use strict";
// Declare all the app level modules which depend on the different filters and services
angular.module("ygVendorApp",["ui.router","ngStorage","ngResource","base64","login","home"]).config(["$urlRouterProvider","$locationProvider","roleProvider",function(a,b,c){
// For any unmatched url, redirect to /login
a.otherwise("/home"),b.html5Mode(!0).hashPrefix("!"),c.$get().$setUserRole()}])}(),function(){"use strice";var a={role:"",token:""};angular.module("ygVendorApp").constant("UserData",a)}(),function(){"use strice";var a={v1baseUrl:"/api/v1/",v2baseUrl:"/api/v2/",v3baseUrl:"/api/v3/",userRole:{ADMIN:"operations",VENDOR:"vendor"}};angular.module("ygVendorApp").constant("constants",a)}(),function(){"use strict";var a=function(a,b){var c={OK:200,UNAUTHORIZED:401,FORBIDDEN:403,hasRole:function(d){var e=a.defer();return b.then(function(a){a.$hasRole(d)?e.resolve(c.OK):a.$isAnonymous()?e.reject(c.UNAUTHORIZED):e.reject(c.FORBIDDEN)}),e.promise},isAuthenticated:function(){var d=a.defer();return b.then(function(a){a.$isAuthenticated()?d.resolve(c.Ok):d.reject(c.UNAUTHORIZED)}),d.promise},isAnonymous:function(){var d=a.defer();return b.then(function(a){a.$isAnonymous()?d.resolve(c.OK):d.reject(c.FORBIDDEN)}),d.promise}};return c};angular.module("ygVendorApp").factory("Access",["$q","vendorClients",a])}(),function(){"use strict";var a=function(a,b){return a(b.v1baseUrl+"vendor/:id",{id:"@id"},{profile:{method:"GET"}})};angular.module("ygVendorApp").factory("Vendor",["$resource","constants",a])}(),function(){"use strict";var a=function(a,b,c){var d={responseError:function(d){var e=a.defer();return(401===d.status||403===d.status)&&(b.$reset(),c.path("/login")),e.reject(d),e.promise}};return d};angular.module("ygVendorApp").factory("errorHandler",["$q","$localStorage","$location",a]).config(["$httpProvider",function(a){a.interceptors.push("errorHandler")}])}(),function(){"use strict";var a=function(a){var b={request:function(b){return b.headers=b.headers||{},a.token&&(b.headers.Authorization="Token "+a.token),b}};return b};angular.module("ygVendorApp").factory("tokenInjector",["$localStorage",a]).config(["$httpProvider",function(a){a.interceptors.push("tokenInjector")}])}(),function(){"use strice";var a=function(a,b){var c={userrole:"anonymous",authenticated:!1,$setUserRole:function(){if(b.token){var c=a.decode(b.token).split(":");userrole=c[1],authenticated=!0}else userrole="anonymous",authenticated=!1},$getUserRole:function(){return{userrole:userrole,is_authenticated:authenticated}}};return c};angular.module("ygVendorApp").factory("role",["$base64","$localStorage",a])}(),function(){"use strict";var a=function(a,b,c){var d={},e=function(){var f=a.defer();return c.profile(function(a){f.resolve(angular.extend(d,a,{$refresh:e,$updateuserRole:function(){return b.$setUserRole()},$hasRole:function(a){return b.$getUserRole().userrole==a},$isAuthenticated:function(){return b.$getUserRole().is_authenticated},$isAnonymous:function(){return!b.$getUserRole().is_authenticated}}))},function(a){f.resolve(angular.extend(d,{$refresh:e,$updateuserRole:function(){return b.$setUserRole()},$hasRole:function(a){return $getUserRole().userrole==a},$isAuthenticated:function(){return b.$getUserRole().is_authenticated},$isAnonymous:function(){return!b.$getUserRole().is_authenticated}}))}),f.promise};return e()};angular.module("ygVendorApp").factory("vendorClients",["$q","role","Vendor",a])}();
//# sourceMappingURL=main.min.js.map